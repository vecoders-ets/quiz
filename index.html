<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Cyber Quiz</title>
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: 'Courier New', monospace;
      color: #00ff00; /* green cyber color */
      background: #0a0a0f;
      height: 100vh;
      display: flex;
      flex-direction: column;
      overflow: hidden;
    }

    video.bg-video {
      position: fixed;
      right: 0;
      bottom: 0;
      min-width: 100%;
      min-height: 100%;
      object-fit: cover;
      z-index: -1;
      filter: brightness(0.4) contrast(1.2);
    }

    .container {
      flex: 1;
      display: flex;
      justify-content: center;
      align-items: center;
      padding: 40px;
      position: relative;
      z-index: 2;
    }

    .form-screen, .questionnaire, .thank-you {
      background: rgba(20,20,30,0.85);
      padding: 30px;
      border-radius: 12px;
      max-width: 650px;
      width: 100%;
      text-align: center;
      border: 2px solid #00ff00;
      box-shadow: 0 0 20px #00ff00;
      animation: glow 2s infinite alternate;
    }

    @keyframes glow {
      from { box-shadow: 0 0 8px #00ff00; }
      to { box-shadow: 0 0 20px #00ff00; }
    }

    h1 {
      color: #00ff00;
      font-size: 2rem;
      margin-bottom: 20px;
      text-transform: uppercase;
      letter-spacing: 2px;
    }

    h2 { color: #00ff00; text-transform: uppercase; letter-spacing: 2px; }

    input, button {
      width: 100%;
      padding: 14px;
      margin: 12px 0;
      border: 1px solid #00ff00;
      border-radius: 8px;
      font-size: 1rem;
      font-family: 'Courier New', monospace;
      background: black;
      color: #00ff00;
      outline: none;
    }

    input::placeholder { color: #0f0; }

    button {
      background-color: #111;
      border: 2px solid #00ff00;
      cursor: pointer;
      text-transform: uppercase;
      letter-spacing: 1px;
      font-weight: bold;
      transition: all 0.3s ease;
    }

    button:hover { background-color: #00ff00; color: #000; box-shadow: 0 0 15px #00ff00; }
    .next-btn:disabled { background: #222; border-color: #555; color: #777; }

    .question-count {
      color: #00ff00;
      font-weight: bold;
      margin-bottom: 0.5rem;
      font-size: 1rem;
      letter-spacing: 1px;
    }

    .question-text {
      font-size: 1.2rem;
      font-weight: bold;
      margin-bottom: 20px;
      color: #fff;
      text-shadow: 0 0 8px #00ff00;
    }

    .options button {
      display: block;
      width: 100%;
      padding: 14px;
      font-size: 1rem;
      border-radius: 10px;
      background: #111;
      margin-bottom: 12px;
      text-align: left;
      cursor: pointer;
      border: 1px solid #00ff00;
      color: #00ff00;
      transition: background 0.3s ease, box-shadow 0.3s ease;
    }

    .options button:hover { background-color: #00ff00; color: #000; }
    .options button.selected { background-color: #00ff00; color: #000; box-shadow: 0 0 10px #00ff00; }

    /* Result styles */
    #thank-you #result-text {
      font-size: 1.5rem; /* smaller score above */
      margin-bottom: 15px;
      color: #00ff00;
    }

    #thank-you #result-message {
      font-size: 3rem; /* big message */
      font-weight: bold;
      text-align: center;
      color: #00ff00;
      margin-bottom: 20px;
    }

    #clues-list {
      text-align: left;
      font-size: 1rem; /* smaller font for clues */
      color: #00ff00;
      line-height: 1.6;
      margin-top: 20px;
    }

    #clues-list li {
      margin-bottom: 10px;
    }

    /* Final key box styling */
    #final-key-box {
      margin-top: 20px;
      text-align: left;
    }

    #final-key-box input {
      width: calc(100% - 110px);
      display: inline-block;
      vertical-align: middle;
      margin-right: 8px;
    }

    #final-key-box button {
      width: 100px;
      display: inline-block;
      vertical-align: middle;
      padding: 12px;
      margin: 0;
    }

    #finalKeyMsg {
      margin-top: 12px;
      font-size: 1rem;
      color: #00ff00;
    }
  </style>
</head>
<body>
  <video class="bg-video" src="./vid/vid.mp4" autoplay muted loop></video>

  <div class="container">
    <!-- Form -->
    <div class="form-screen" id="form-screen">
      <h1>Solve the Quiz – Last Round</h1>
      <input type="text" id="teamName" placeholder="Team Name" required />
      <input type="email" id="email" placeholder="Email" required />
      <button onclick="startQuiz()">Start Quiz</button>
      <div id="form-error" style="color:red; margin-top:10px;"></div>
    </div>

    <!-- Quiz -->
    <div class="questionnaire" id="questionnaire" style="display:none;">
      <div class="question-count" id="question-count">Question 1/20</div>
      <div class="question-text" id="question-text"></div>
      <div class="options" id="options"></div>
      <button class="next-btn" id="next-btn" disabled>Next →</button>
    </div>

    <!-- Result -->
    <div class="thank-you" id="thank-you" style="display:none;">
      <div id="result-text"></div>
      <div id="result-message"></div>
      <ul id="clues-list"></ul>

      <!-- Final key input - shown only when clues unlocked -->
      <div id="final-key-box" style="display:none;">
        <input type="text" id="finalKeyInput" placeholder="Enter the final key" />
        <button id="finalKeySubmit" onclick="checkFinalKey()">Submit</button>
        <div id="finalKeyMsg"></div>
      </div>
    </div>
  </div>

  <script>
    const questions = [
      { text: "1. Coding is the process of…", options: ["a) Talking to computers","b) Writing instructions for computers","c) Designing machines","d) Playing games"], answer:"b) Writing instructions for computers" },
      { text: "2. Source code is written by…", options: ["a) Computer","b) Programmer","c) Compiler","d) Operating system"], answer:"b) Programmer" },
      { text: "3. A compiler translates…", options: ["a) Machine code to source code","b) Source code to machine code","c) English to binary","d) Errors to warnings"], answer:"b) Source code to machine code" },
      { text: "4. An interpreter executes the program…", options: ["a) Line by line","b) Whole at once","c) Only errors","d) Only loops"], answer:"a) Line by line" },
      { text: "5. A variable is used to…", options: ["a) Store data","b) Debug code","c) Compile code","d) Run loops"], answer:"a) Store data" },
      { text: "6. Array is a type of…", options: ["a) Loop","b) Variable","c) Data structure","d) Function"], answer:"c) Data structure" },
      { text: "7. OOP stands for…", options: ["a) Open Object Program","b) Object-Oriented Programming","c) Overloaded Operation Program","d) Object Operating Process"], answer:"b) Object-Oriented Programming" },
      { text: "8. In Python: a=5; b=2; print(a // b, a / b)", options: ["a) 2 2.5","b) 2.5 2","c) 5 2","d) Error"], answer:"a) 2 2.5" },
      { text: "9. In Python: x=[10,20,30]; print(x[1]+x[-1])", options: ["a) 20","b) 40","c) 50","d) Error"], answer:"c) 50" },
      { text: "10. In Python: for i in range(2,8,2): print(i,end=' ')", options: ["a) 2 3 4 5 6 7","b) 2 4 6","c) 2 8","d) Error"], answer:"b) 2 4 6" },
      { text: "11. In Python: s='python'; print(s[1:4])", options: ["a) pyt","b) yth","c) tho","d) hon"], answer:"b) yth" },
      { text: "12. In Python NumPy: arr=[1,2,3,4]; arr.mean()", options: ["a) 2.0","b) 2.5","c) 3","d) Error"], answer:"b) 2.5" },
      { text: "13. In Pandas: df={'A':[1,2,3],'B':[4,5,6]}; print(df['A'].sum())", options: ["a) 6","b) 5","c) 3","d) Error"], answer:"a) 6" },
      { text: "14. In Java: String s1='Hello'; String s2=new String('Hello'); System.out.println(s1==s2)", options: ["a) true","b) false","c) Hello","d) Error"], answer:"b) false" },
      { text: "15. In Java: int x=5; System.out.println(x++ + ++x)", options: ["a) 11","b) 12","c) 10","d) 13"], answer:"b) 12" },
      { text: "16. In Java: int a=10,b=20; System.out.println(a>b?a:b)", options: ["a) 10","b) 20","c) 0","d) Error"], answer:"b) 20" },
      { text: "17. In Java: String str='Java'; System.out.println(str.length())", options: ["a) 3","b) 4","c) 5","d) Error"], answer:"b) 4" },
      { text: "18. In C: int a=10; printf('%d', a/4*4)", options: ["a) 8","b) 10","c) 4","d) 0"], answer:"a) 8" },
      { text: "19. In C: int a=12; printf('%d', a%5)", options: ["a) 2","b) 3","c) 5","d) 7"], answer:"a) 2" },
      { text: "20. In C: int n=5; printf('%d', n<<1)", options: ["a) 5","b) 10","c) 2","d) 0"], answer:"b) 10" }
    ];

    let currentQuestion = 0;
    let score = 0;
    let teamName = "", email = "";
    const questionText = document.getElementById('question-text');
    const optionsContainer = document.getElementById('options');
    const nextBtn = document.getElementById('next-btn');
    const questionCount = document.getElementById('question-count');
    const scoreMap = {};

    function loadQuestion() {
      const q = questions[currentQuestion];
      questionCount.innerText = `Question ${currentQuestion + 1}/${questions.length}`;
      questionText.innerText = q.text;
      optionsContainer.innerHTML = '';
      nextBtn.disabled = true;

      q.options.forEach(option => {
        const btn = document.createElement('button');
        btn.innerText = option;
        btn.onclick = () => {
          document.querySelectorAll('.options button').forEach(b => b.classList.remove('selected'));
          btn.classList.add('selected');
          nextBtn.disabled = false;
          scoreMap[currentQuestion] = option === q.answer;
        };
        optionsContainer.appendChild(btn);
      });
    }

    nextBtn.onclick = () => {
      if (currentQuestion < questions.length - 1) {
        currentQuestion++;
        loadQuestion();
      } else {
        finishQuiz();
      }
    };

    function startQuiz() {
      teamName = document.getElementById('teamName').value.trim();
      email = document.getElementById('email').value.trim();
      const errorDiv = document.getElementById('form-error');
      if (!teamName || !email) {
        errorDiv.textContent = "⚠ Access Denied: Missing Credentials";
        return;
      }
      document.getElementById('form-screen').style.display = 'none';
      document.getElementById('questionnaire').style.display = 'block';
      loadQuestion();
    }

    async function finishQuiz() {
      document.getElementById('questionnaire').style.display = 'none';
      const thankYouDiv = document.getElementById('thank-you');
      score = Object.values(scoreMap).filter(Boolean).length;
      document.getElementById('result-text').innerText = `Score: ${score}/20`;

      const cluesList = document.getElementById('clues-list');
      cluesList.innerHTML = "";

      const finalKeyBox = document.getElementById('final-key-box');
      const finalKeyMsg = document.getElementById('finalKeyMsg');
      finalKeyMsg.innerText = "";
      document.getElementById('finalKeyInput').value = "";

      if (score >= 14) {
        document.getElementById('result-message').innerText = "🟢 Clues Unlocked!";
        const clues = [
          "(1) I never speak yet voices stay, on my face, their words relay, notice me.",
          "(2) Doors that vanish, floors that swap, I wait beside the moving relay.",
          "(3) I'm the OG security system, my fav music is metal, I keep the classroom safe.",
          "(4) People place their bag in the matrix outside the lab."
        ];
        clues.forEach(clue => {
          const li = document.createElement('li');
          li.innerText = clue;
          cluesList.appendChild(li);
        });

        finalKeyBox.style.display = 'block';
      } else {
        document.getElementById('result-message').innerText = "🔴 You're Eliminated!";
        finalKeyBox.style.display = 'none';
      }

      try {
        const formData = new URLSearchParams();
        formData.append("Timestamp", new Date().toLocaleString());
        formData.append("Team Name", teamName);
        formData.append("Email", email);
        formData.append("Score", score);

        const scriptURL = "https://script.google.com/macros/s/AKfycbylwWh00EHrl6UhnXazt436FS22dfw7ncWY5biC8cIUdznQdm_S6LaJkwG5_1Yedews/exec";
        await fetch(scriptURL, { method: "POST", body: formData });
      } catch (err) {
        console.error("Submission error:", err);
      }
      thankYouDiv.style.display = 'block';
    }

    function checkFinalKey() {
      const input = document.getElementById('finalKeyInput');
      const key = input.value.trim();
      const msgDiv = document.getElementById('finalKeyMsg');

      const keyMap = {
        "890907": "ironman4mark85@gmail.com",
        "398976": "captainamerica4shield@gmail.com",
        "137387": "thor4mjolnir@gmail.com",
        "798435": "hulk4incredible@gmail.com"
      };

      if (keyMap[key]) {
        msgDiv.style.color = "#00ff00";
        msgDiv.innerText = keyMap[key];
      } else {
        msgDiv.style.color = "red";
        msgDiv.innerText = "You failed, retry.";
      }
    }
  </script>
</body>
</html>

